<Window x:Class="VerificationAirVelocitySensor.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewModel="clr-namespace:VerificationAirVelocitySensor.ViewModel"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        mc:Ignorable="d"
        Background="LightSlateGray"
        ResizeMode="CanMinimize"
        Title="MainWindow"
        Height="400"
        Width="500">
    <Window.DataContext>
        <viewModel:MainWindowVm />
    </Window.DataContext>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="20" />
            <RowDefinition Height="1*" />
        </Grid.RowDefinitions>
        <Border Grid.Row="0">
            <Menu>
                <MenuItem Header="Настройки">
                    <MenuItem Header="Подключения"
                              Command="{Binding OpenCloseConnectionMenuCommand}" />
                    <MenuItem Header="Частотомер ЧЗ-85/6">
                        <MenuItem Header="Канал">
                            <MenuItem Header="1"
                                      Command="{Binding SetFrequencyChannel1Command}" />
                            <MenuItem Header="2"
                                      Command="{Binding SetFrequencyChannel2Command}" />
                        </MenuItem>
                        <MenuItem Header="Время">
                            <MenuItem Header="1c"
                                      Command="{Binding SetGateTime1SCommand}" />
                            <MenuItem Header="4c"
                                      Command="{Binding SetGateTime4SCommand}" />
                            <MenuItem Header="7c"
                                      Command="{Binding SetGateTime7SCommand}" />
                            <MenuItem Header="10c"
                                      Command="{Binding SetGateTime10SCommand}" />
                            <MenuItem Header="100c"
                                      Command="{Binding SetGateTime100SCommand}" />
                        </MenuItem>
                        <MenuItem Header="ФНЧ">
                            <MenuItem Header="1-ый канал On"
                                      Command="{Binding OnFilterChannel1Command}" />
                            <MenuItem Header="1-ый канал Off"
                                      Command="{Binding OffFilterChannel1Command}" />
                            <MenuItem Header="2-ый канал On"
                                      Command="{Binding OnFilterChannel2Command}" />
                            <MenuItem Header="2-ый канал Off"
                                      Command="{Binding OffFilterChannel2Command}" />
                        </MenuItem>
                        <MenuItem Header="Сброс"
                                  Command="{Binding ResetCommand}" />
                    </MenuItem>
                </MenuItem>
                <MenuItem Header="Режимы">
                    <MenuItem Header="Отладка"
                              Command="{Binding OpenCloseDebuggingMenuCommand}" />
                    <MenuItem Header="Изменения" />
                </MenuItem>
                <MenuItem Header="Справка"
                          Command="{Binding OpenReferenceCommand}" />
            </Menu>
        </Border>

        <Button Content="Считать значение частотометра"
                Command="{Binding ReadValueOnFrequencyCounterCommand}"
                HorizontalAlignment="Left"
                Margin="40,143,0,0"
                Grid.Row="1"
                VerticalAlignment="Top"
                Width="248" />
        <TextBlock HorizontalAlignment="Left"
                   Height="20"
                   Margin="40,168,0,0"
                   Grid.Row="1"
                   TextWrapping="Wrap"
                   Text="{Binding FrequencyCounterValue}"
                   VerticalAlignment="Top"
                   Width="248" />


        <!--#region Connection Menu-->
        <Border Grid.Row="1"
                Visibility="{Binding VisibilityConnectionMenu , Converter= {StaticResource BoolToVis}}">
            <Button Style="{StaticResource OnlyBackgroundButtonStyle}"
                    Command="{Binding OpenCloseConnectionMenuCommand}"
                    Opacity="0.6"
                    Background="Black" />
        </Border>

        <Border Grid.Row="1"
                Visibility="{Binding VisibilityConnectionMenu , Converter= {StaticResource BoolToVis}}"
                Margin="100,50,100,100"
                BorderBrush="Black"
                BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="1*" />
                </Grid.RowDefinitions>
                <Grid Background="LightGray"
                      Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*" />
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>
                    <Grid Grid.Column="0">
                        <TextBlock Text="Подключения"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Left"
                                   Margin="20,0"
                                   FontWeight="DemiBold"
                                   FontSize="20" />
                    </Grid>
                    <Grid Grid.Column="1">
                        <Button Style="{StaticResource CloseSettingsMenuButtonStyle}"
                                Margin="0,0,10,0"
                                Command="{Binding OpenCloseConnectionMenuCommand}"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center" />
                    </Grid>
                </Grid>
                <Grid Grid.Row="1"
                      Background="#777F87">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="1*" />
                        <RowDefinition Height="1*" />
                    </Grid.RowDefinitions>
                    <Border Grid.Row="0"
                            BorderThickness="0,1,0,0"
                            BorderBrush="Black">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="1*" />
                                <RowDefinition Height="1*" />
                            </Grid.RowDefinitions>
                            <Grid Grid.Row="0">
                                <TextBlock Text="Частотомер ЧЗ-85/6"
                                           FontSize="16"
                                           FontWeight="DemiBold"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center" />
                            </Grid>
                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="1*" />
                                </Grid.ColumnDefinitions>
                                <Grid Grid.Column="0">
                                    <ComboBox Margin="5,10"
                                              HorizontalContentAlignment="Center"
                                              VerticalContentAlignment="Center"
                                              ItemsSource="{Binding PortsList}"
                                              SelectedItem="{Binding ComPortFrequencyCounter}">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="DropDownOpened">
                                                <i:InvokeCommandAction Command="{Binding UpdateComPortsSourceCommand}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </ComboBox>
                                </Grid>
                                <Grid Grid.Column="1">
                                    <Button Margin="5,10">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Command"
                                                        Value="{Binding OpenPortFrequencyCounterCommand}" />
                                                <Setter Property="Content"
                                                        Value="Connect" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding FrequencyCounterIsOpen}"
                                                                 Value="True">
                                                        <Setter Property="Command"
                                                                Value="{Binding ClosePortFrequencyCounterCommand}" />
                                                        <Setter Property="Content"
                                                                Value="Un Connect" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </Grid>
                                <Grid Grid.Column="2">
                                    <Image Height="15">
                                        <Image.Style>
                                            <Style TargetType="Image">
                                                <Setter Property="Source"
                                                        Value="{StaticResource UnConnectIcon}" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding FrequencyCounterIsOpen}"
                                                                 Value="True">
                                                        <Setter Property="Source"
                                                                Value="{StaticResource ConnectIcon}" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                    </Image>
                                </Grid>
                            </Grid>

                        </Grid>
                    </Border>
                    <Border Grid.Row="1"
                            BorderThickness="0,1,0,0"
                            BorderBrush="Black">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="1*" />
                                <RowDefinition Height="1*" />
                            </Grid.RowDefinitions>
                            <Grid Grid.Row="0">
                                <TextBlock Text="ПЛК73"
                                           FontSize="16"
                                           FontWeight="DemiBold"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center" />
                            </Grid>
                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="1*" />
                                </Grid.ColumnDefinitions>
                                <Grid Grid.Column="0">
                                    <ComboBox Margin="5,10"
                                              HorizontalContentAlignment="Center"
                                              VerticalContentAlignment="Center"
                                              ItemsSource="{Binding PortsList}"
                                              SelectedItem="{Binding ComPortFrequencyMotor}">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="DropDownOpened">
                                                <i:InvokeCommandAction Command="{Binding UpdateComPortsSourceCommand}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </ComboBox>
                                </Grid>
                                <Grid Grid.Column="1">
                                    <Button Margin="5,10">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Command"
                                                        Value="{Binding OpenPortFrequencyMotorCommand}" />
                                                <Setter Property="Content"
                                                        Value="Connect" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding FrequencyMotorIsOpen}"
                                                                 Value="True">
                                                        <Setter Property="Command"
                                                                Value="{Binding ClosePortFrequencyMotorCommand}" />
                                                        <Setter Property="Content"
                                                                Value="Un Connect" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </Grid>
                                <Grid Grid.Column="2">
                                    <Image Height="15">
                                        <Image.Style>
                                            <Style TargetType="Image">
                                                <Setter Property="Source"
                                                        Value="{StaticResource UnConnectIcon}" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding FrequencyMotorIsOpen}"
                                                                 Value="True">
                                                        <Setter Property="Source"
                                                                Value="{StaticResource ConnectIcon}" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                    </Image>
                                </Grid>
                            </Grid>

                        </Grid>
                    </Border>

                </Grid>

            </Grid>

        </Border>
        <!--#endregion-->

        <!--#region Окно отладки (Ручного управления частотным двигателем)-->
        <Border Grid.Row="1"
                Visibility="{Binding VisibilityDebuggingMenu , Converter= {StaticResource BoolToVis}}">
            <Button Style="{StaticResource OnlyBackgroundButtonStyle}"
                    Command="{Binding OpenCloseDebuggingMenuCommand}"
                    Opacity="0.6"
                    Background="Black" />
        </Border>

        <Border Grid.Row="1"
                Visibility="{Binding VisibilityDebuggingMenu , Converter= {StaticResource BoolToVis}}"
                Margin="100,50,100,100"
                BorderBrush="Black"
                BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="1*" />
                </Grid.RowDefinitions>
                <Grid Background="LightGray"
                      Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*" />
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>
                    <Grid Grid.Column="0">
                        <TextBlock Text="Отладка"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Left"
                                   Margin="20,0"
                                   FontWeight="DemiBold"
                                   FontSize="20" />
                    </Grid>
                    <Grid Grid.Column="1">
                        <Button Style="{StaticResource CloseSettingsMenuButtonStyle}"
                                Margin="0,0,10,0"
                                Command="{Binding OpenCloseDebuggingMenuCommand}"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center" />
                    </Grid>
                </Grid>
                <Grid Grid.Row="1"
                      Background="#777F87">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="3*" />
                        <RowDefinition Height="1*" />
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0"
                            BorderThickness="0,1,0,1"
                            BorderBrush="Black">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*" />
                                <ColumnDefinition Width="1*" />
                            </Grid.ColumnDefinitions>

                            <Grid Column="0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="1*" />
                                    <RowDefinition Height="1*" />
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1*" />
                                        <RowDefinition Height="1*" />
                                    </Grid.RowDefinitions>
                                    <Grid Grid.Row="0">
                                        <TextBlock Text="Уст. скорость"
                                                   FontSize="14"
                                                   TextWrapping="Wrap"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center" />
                                    </Grid>
                                    <Grid Grid.Row="1">
                                        <xctk:DecimalUpDown HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Value="{Binding SpeedFrequencyMotor}"
                                                            FormatString="{}{0:0.0} м/c"
                                                            TextAlignment="Center"
                                                            ShowButtonSpinner="False"
                                                            Minimum="0"
                                                            Maximum="30"
                                                            Increment="0.1"
                                                            Width="75" />
                                    </Grid>
                                </Grid>
                                <Grid Grid.Row="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1*" />
                                        <RowDefinition Height="1*" />
                                    </Grid.RowDefinitions>

                                    <Grid Grid.Row="0">
                                        <TextBlock Text="Коэффицент"
                                                   FontSize="14"
                                                   TextWrapping="Wrap"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center" />
                                    </Grid>
                                    <Grid Grid.Row="1">
                                        <xctk:DecimalUpDown HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            IsReadOnly="{Binding IsAutoCorrectionCoefficient , Converter={StaticResource InvertBool}}"
                                                            Value="{Binding Coefficient}"
                                                            FormatString="{}{0:0.00}"
                                                            TextAlignment="Center"
                                                            ShowButtonSpinner="False"
                                                            Minimum="0"
                                                            Maximum="30"
                                                            Increment="0.1"
                                                            Width="75" />
                                    </Grid>

                                </Grid>
                            </Grid>
                            <Grid Column="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="1*" />
                                    <RowDefinition Height="1*" />
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1*" />
                                        <RowDefinition Height="1*" />
                                    </Grid.RowDefinitions>
                                    <Grid Grid.Row="0">
                                        <Button HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Command="{Binding SetSpeedFrequencyMotorCommand}"
                                                Content="Установить"
                                                Height="20"
                                                Width="74" />
                                    </Grid>
                                    <Grid Grid.Row="1">
                                        <Button HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Command="{Binding StopFrequencyMotorCommand}"
                                                Height="20"
                                                Width="75">
                                            <TextBlock Text="СТОП"
                                                       Foreground="Red"
                                                       FontWeight="Bold" />
                                        </Button>
                                    </Grid>
                                </Grid>
                                <Grid Row="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1*" />
                                        <RowDefinition Height="1*" />
                                    </Grid.RowDefinitions>

                                    <Grid Grid.Row="0">
                                        <TextBlock Text="Авто корректировка коэфициента"
                                                   FontSize="12"
                                                   TextWrapping="Wrap"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center" />
                                    </Grid>
                                    <Grid Grid.Row="1">
                                        <Viewbox>
                                            <CheckBox IsChecked="{Binding IsAutoCorrectionCoefficient}" 
                                                      Margin="5"/>
                                        </Viewbox>
                                    </Grid>

                                </Grid>
                            </Grid>
                        </Grid>
                    </Border>
                    <Grid Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*" />
                            <ColumnDefinition Width="1*" />
                        </Grid.ColumnDefinitions>

                        <Grid Column="0">
                            <TextBlock Text="Эталонная скорость"
                                       TextWrapping="Wrap"
                                       FontSize="14"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center" />
                        </Grid>
                        <Grid Column="1">
                            <xctk:DecimalUpDown HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Background="ForestGreen"
                                                BorderBrush="Red"
                                                BorderThickness="2"
                                                Value="{Binding SpeedReferenceValue}"
                                                IsReadOnly="True"
                                                TextAlignment="Center"
                                                FormatString="{}{0} м/с"
                                                ShowButtonSpinner="False"
                                                Width="75" />
                        </Grid>
                    </Grid>

                </Grid>
            </Grid>
        </Border>
        <!--#endregion-->

        <!--#region Reference-->
        <Border Grid.Row="1"
                Visibility="{Binding IsReference , Converter={StaticResource BoolToVis}}">
            <Grid>
                <Image Source="../Style/b0e1b7cd6ed3c0b4f98e1b9385ad6b4d.jpg" />
                <TextBlock Text="Нельзя так просто взять и сделать справку !!!"
                           Foreground="White"
                           FontWeight="Bold"
                           FontSize="20"
                           TextWrapping="Wrap"
                           Width="250"
                           Margin="29,40,0,0"
                           VerticalAlignment="Top"
                           HorizontalAlignment="Left" />
            </Grid>
        </Border>
        <!--#endregion-->

    </Grid>
</Window>